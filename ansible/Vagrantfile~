Vagrant.configure("2") do |config|
  config.vm.define "gw" do |gw|
    gw.vm.box = "CSGPwn-Gateway"
    gw.vm.box_url = "file:///home/kulinacs/void-virtualbox.box"
    gw.vm.provider "virtualbox" do |v|
      v.gui = false
      v.name = "CSGPwn-Gateway"
    end
    gw.vm.provision "shell", inline: "xbps-install -Sy python || true"
    gw.vm.provision "ansible" do |ansible|
      ansible.playbook = "gateway.yml"
    end
    gw.vm.network "private_network", type: "dhcp", auto_config: false
    gw.vm.network "private_network", virtualbox__intnet: "csgpwn-net", auto_config: false
  end
  config.vm.define "server" do |server|
    server.vm.box = "CSGPwn-Server"
    server.vm.box_url = "file:///home/kulinacs/void-virtualbox.box"
    server.vm.provision "shell", inline: "xbps-install -Sy python || true"
    server.vm.provision "ansible" do |ansible|
      ansible.playbook = "server.yml"
    end
    server.vm.provider "virtualbox" do |v|
      v.gui = false
      v.name = "CSGPwn-Server"
    end
    server.vm.network "private_network", virtualbox__intnet: "csgpwn-net", auto_config: false
  end
    config.vm.define "home" do |home|
    home.vm.box = "CSGPwn-Home"
    home.vm.box_url = "file:///home/kulinacs/void-virtualbox.box"
    home.vm.provision "shell", inline: "xbps-install -Sy python || true"
    home.vm.provision "ansible" do |ansible|
      ansible.playbook = "home.yml"
    end
    home.vm.provider "virtualbox" do |v|
      v.gui = false
      v.name = "CSGPwn-Home"
    end
    home.vm.network "private_network", virtualbox__intnet: "csgpwn-net", auto_config: false
  end
end 
